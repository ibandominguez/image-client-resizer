'use strict';var _typeof=typeof Symbol==='function'&&typeof Symbol.iterator==='symbol'?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==='function'&&obj.constructor===Symbol&&obj!==Symbol.prototype?'symbol':typeof obj};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}var ImageClientResizer=function(){function ImageClientResizer(file){_classCallCheck(this,ImageClientResizer);if(!(file instanceof File)){throw new TypeError('Value of argument "file" violates contract.\n\nExpected:\nFile\n\nGot:\n'+_inspect(file))}this.file=file}_createClass(ImageClientResizer,[{key:'isValid',value:function isValid(){function _ref(_id){if(!(typeof _id==='boolean')){throw new TypeError('Function return value violates contract.\n\nExpected:\nboolean\n\nGot:\n'+_inspect(_id))}return _id}return _ref(ImageClientResizer.ALLOWED_TYPES.includes(this.file.type))}},{key:'resize',value:function resize(width,height){var _this=this;if(!(typeof width==='number')){throw new TypeError('Value of argument "width" violates contract.\n\nExpected:\nnumber\n\nGot:\n'+_inspect(width))}if(!(typeof height==='number')){throw new TypeError('Value of argument "height" violates contract.\n\nExpected:\nnumber\n\nGot:\n'+_inspect(height))}var canvas=Object.assign(document.createElement('canvas'),{width:width,height:height});var image=new Image(width,height);var reader=new FileReader;return new Promise(function(resolve,reject){if(!_this.isValid()){return reject(new Error('File type should be one of '+ImageClientResizer.ALLOWED_TYPES.join(', ')))}reader.readAsDataURL(_this.file);reader.onload=function(event){image.src=event.target.result;image.onload=function(){canvas.getContext('2d').drawImage(image,0,0,width,height);resolve(canvas.toDataURL(_this.file.type))}}})}}]);return ImageClientResizer}();ImageClientResizer.ALLOWED_TYPES=['image/jpeg','image/png'];function _inspect(input,depth){var maxDepth=4;var maxKeys=15;if(depth===undefined){depth=0}depth+=1;if(input===null){return'null'}else if(input===undefined){return'void'}else if(typeof input==='string'||typeof input==='number'||typeof input==='boolean'){return typeof input==='undefined'?'undefined':_typeof(input)}else if(Array.isArray(input)){if(input.length>0){if(depth>maxDepth)return'[...]';var first=_inspect(input[0],depth);if(input.every(function(item){return _inspect(item,depth)===first})){return first.trim()+'[]'}else{return'['+input.slice(0,maxKeys).map(function(item){return _inspect(item,depth)}).join(', ')+(input.length>=maxKeys?', ...':'')+']'}}else{return'Array'}}else{var keys=Object.keys(input);if(!keys.length){if(input.constructor&&input.constructor.name&&input.constructor.name!=='Object'){return input.constructor.name}else{return'Object'}}if(depth>maxDepth)return'{...}';var indent='  '.repeat(depth-1);var entries=keys.slice(0,maxKeys).map(function(key){return(/^([A-Z_$][A-Z0-9_$]*)$/i.test(key)?key:JSON.stringify(key))+': '+_inspect(input[key],depth)+';'}).join('\n  '+indent);if(keys.length>=maxKeys){entries+='\n  '+indent+'...'}if(input.constructor&&input.constructor.name&&input.constructor.name!=='Object'){return input.constructor.name+' {\n  '+indent+entries+'\n'+indent+'}'}else{return'{\n  '+indent+entries+'\n'+indent+'}'}}}